<!DOCTYPE html>

<html>

	<head>

		<title>Simon</title>

		<!-- bootstrap css-->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

		<!-- my simon css -->
		<link rel="stylesheet" href="css/simplesimon.css">

	</head>

	<body>

		<main class="container">

			<marquee id="play" scrollamount="20" class=" h1 text-center start">Click Here To Begin Click Here To Begin Click Here To Begin Click Here To Begin Click Here To Begin</marquee>

			<section class="text-center row col-md-6 col-sm-6 col-xs-6 col-lg-6 col-md-offset-3 col-sm-offset-3 col-xs-offset-3 col-lg-offset-3 gameboard">

				<div class="square red " data="1"></div>

				<div class="square blue " data="2"></div>

				<div class="square green " data="3"></div>

				<div class="square yellow " data="4"></div>

			</section>

		</main>

		<!-- jQuery -->

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

		<script type="text/javascript">

		// $(document).ready(function () {

			// global variables
			
			var min = 1;
			var max = 4;
			var simrandomnumber;
			var simonsequence = [];
			var i = 0;

			// game start

			$(".start").click(function() {

				$(".start").fadeOut(400,getRandomIntInclusive());

			});

			// random number generator that adds to array when called

			function getRandomIntInclusive() {

  				simrandomnumber = Math.floor(Math.random() * (max - min + 1)) + min;

  				simonsequence.push(simrandomnumber);

  				console.log(simonsequence);

				animateSimon();

			};

			// functions for lighting up the squares

			function animateSimon () {

				var i = 0;

				var interval = setInterval(function() {

					if(i >= simonsequence.length) {
						clearInterval(interval);
					};

				lightingUp(simonsequence[i]);

				i++;

				},400);

			};

			function buttonFlash(color) {

				color.addClass("up");

				setTimeout(function () {

					color.removeClass("up");

				}, 300); 
				
			};

			function lightingUp(element) {

				$.each(simonsequence, function() {

					switch(element) {

					    case 1:
					        buttonFlash($(".red"));
					        break;

					    case 2:
					    	buttonFlash($(".blue"));
					        break;
					
						case 3:
							buttonFlash($(".green"));
							break;

						case 4:
							buttonFlash($(".yellow"));
							break;

					};

				}); 

			};
			 
			// animation for user click 

			function squareClick () {

				$(".square").mousedown(function() {

					$(this).addClass("down");
				
				$(this).mouseup(function() {

					$(this).removeClass("down");

				});

				console.log($(this).attr("data"));

				// game logic based on user input success or failure

				if ($(this).attr("data") == simonsequence[i]) {

					if (simonsequence.length - 1 == i) {

						getRandomIntInclusive();

						i = 0; 

					} else {

						i++;

					};

				} else {

					simonsequence = [];

					i = 0;

					function newRound() {

						$(".start").fadeIn(300);

						$(".square").removeClass("down");
						
					};

					newRound();
				};
				
				});
			};

			squareClick();

		// });


		</script>

		<!-- bootstrap js -->
		<script 
    	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
		</script>

	</body>

</html>